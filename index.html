<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡¶¨‡ßã‡¶ü‡¶æ‡¶®‡¶ø‡¶ï‡¶æ | Botanica - Educational Game</title>
    
    <meta name="author" content="Tanjid Shuvro">
    <meta name="theme-color" content="#2e7d32">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #2e7d32;
            --primary-light: #a5d6a7;
            --accent: #ff6f00; 
            --fb-blue: #1877F2;
            --bg-body: #f1f8e9;
            --bg-card: #ffffff;
            --text-main: #1b5e20; 
            --text-muted: #558b2f;
            --font-main: 'Hind Siliguri', sans-serif;
            --font-num: 'Poppins', sans-serif;
            --shadow: 0 10px 40px rgba(46, 125, 50, 0.15);
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }

        body {
            background: var(--bg-body);
            font-family: var(--font-main);
            height: 100vh;
            height: 100dvh; 
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-image: radial-gradient(#c8e6c9 1px, transparent 1px);
            background-size: 24px 24px;
        }

        #app-container {
            width: 100%;
            max-width: 420px;
            height: 100%;
            max-height: 100%; 
            background: var(--bg-card);
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        @media (min-width: 450px) {
            #app-container {
                height: 90vh;
                max-height: 850px;
                border-radius: 24px;
                border: 1px solid #a5d6a7;
            }
        }

        .hidden { display: none !important; }
        .font-en { font-family: var(--font-num); letter-spacing: 0.5px; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .shake-anim { animation: shake 0.3s ease-in-out; }
        
        .icon { width: 24px; height: 24px; fill: currentColor; }
        .icon-xl { width: 32px; height: 32px; fill: currentColor; }

        /* --- SCENE: HOME --- */
        #home-screen {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 30px; background: linear-gradient(180deg, #e8f5e9 0%, #ffffff 100%); text-align: center;
        }

        .logo-icon {
            width: 120px; height: 120px;
            background: linear-gradient(135deg, var(--primary), #66bb6a);
            color: white; border-radius: 40px 0 40px 0;
            display: flex; align-items: center; justify-content: center;
            font-size: 60px; margin: 0 auto 15px;
            box-shadow: 0 15px 30px rgba(46, 125, 50, 0.3);
        }

        h1 { font-size: 2.8rem; color: var(--primary); margin-bottom: 5px; font-weight: 700; }
        .tagline { font-size: 0.85rem; color: #78909c; font-style: italic; font-family: var(--font-num); margin-bottom: 40px;}

        .btn-primary {
            background: var(--primary); color: white; border: none;
            padding: 16px 40px; border-radius: 50px;
            font-size: 1.2rem; font-weight: 600; font-family: var(--font-main);
            box-shadow: 0 10px 20px rgba(46, 125, 50, 0.25);
            cursor: pointer; width: 85%;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: transform 0.1s;
        }
        .btn-primary:active { transform: scale(0.96); }

        .dev-credit { position: absolute; bottom: 20px; font-size: 0.75rem; color: #90a4ae; font-family: var(--font-num); }
        .dev-credit a { color: var(--primary); text-decoration: none; font-weight: 600; }

        /* --- INPUT SCREEN --- */
        #name-input-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98); z-index: 50;
            display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px;
        }
        .input-box {
            width: 100%; padding: 15px; font-size: 1.2rem;
            border: 2px solid var(--primary-light); border-radius: 12px;
            font-family: var(--font-main); margin-bottom: 20px; text-align: center;
            outline: none; color: var(--text-main); background: #fafafa;
        }
        .input-box:focus { border-color: var(--primary); background: #fff; }

        /* --- GAME SCREEN --- */
        #game-screen { flex: 1; display: flex; flex-direction: column; background: #f1f8e9; height: 100%; overflow: hidden; }

        .game-header {
            padding: 15px 20px; background: white;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.04); z-index: 10; flex-shrink: 0;
        }

        .header-left { display: flex; align-items: center; gap: 15px; }
        .header-right { display: flex; align-items: center; gap: 10px; }

        .btn-icon-only {
            background: #ffebee; color: #c62828; border: none;
            width: 40px; height: 40px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.2s;
        }
        
        .stat-pill {
            display: flex; align-items: center; gap: 6px;
            background: #e8f5e9; padding: 6px 12px; border-radius: 20px;
            font-weight: 600; font-size: 0.95rem; color: var(--primary);
        }
        .timer-pill { color: #e65100; background: #fff3e0; }

        .play-area {
            flex: 1; min-height: 0; display: flex; flex-direction: column; align-items: center;
            padding: 20px; overflow-y: auto; width: 100%;
        }

        .lives-wrapper { margin-bottom: 15px; display: flex; gap: 5px; min-height: 24px; }
        .heart-icon { color: #cfd8dc; transition: color 0.3s; }
        .heart-icon.active { color: #e53935; }

        .hint-card {
            background: white; padding: 20px; border-radius: 16px; width: 100%; text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 25px;
            border-top: 4px solid var(--primary); flex-shrink: 0;
        }
        .hint-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-muted); margin-bottom: 8px; display: block; }
        .hint-text { font-size: 1.2rem; color: var(--text-main); font-weight: 600; line-height: 1.4; }

        .tiles-grid {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 12px;
            margin-bottom: 25px; width: 100%; flex-grow: 1; align-content: center;
        }

        .tile {
            width: 55px; height: 55px; background: white; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; font-weight: 600; 
            color: var(--text-main);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
            cursor: pointer; transition: all 0.2s; border: 2px solid #e0e0e0;
            padding-bottom: 3px; 
        }
        .tile.selected {
            background: var(--primary); color: white;
            transform: translateY(-5px); box-shadow: 0 10px 20px rgba(46, 125, 50, 0.3);
            border-color: var(--primary);
        }

        .preview-container {
            width: 100%; background: rgba(255,255,255,0.6);
            border: 2px dashed var(--primary-light); border-radius: 12px;
            padding: 15px; min-height: 65px;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0; margin-top: auto;
        }
        .preview-text { font-size: 1.8rem; font-weight: 700; line-height: 1.2; color: var(--accent); } 
        .preview-text.placeholder { color: #b0bec5; font-size: 1rem; font-weight: 400; }

        .controls-area {
            padding: 20px; background: white; display: flex; gap: 15px;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.05); flex-shrink: 0; z-index: 20; width: 100%;
        }

        .btn-action {
            flex: 1; padding: 14px; border: none; border-radius: 12px;
            font-family: var(--font-main); font-size: 1rem; font-weight: 600;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            cursor: pointer;
        }
        .btn-skip { background: #eceff1; color: #546e7a; }
        .btn-submit { background: var(--primary); color: white; }

        /* --- MODAL --- */
        .modal-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); z-index: 100;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }

        .modal-card {
            background: white; width: 85%; padding: 25px; border-radius: 24px;
            text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            transform: scale(0.8); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 90vh; overflow-y: auto;
        }
        .modal-overlay.active .modal-card { transform: scale(1); }

        .modal-icon { font-size: 3.5rem; margin-bottom: 10px; display: block; }
        .modal-title { font-size: 1.6rem; font-weight: 700; color: var(--primary); margin-bottom: 5px; }
        
        .modal-info-box {
            background: #f1f8e9; padding: 15px; border-radius: 12px; margin: 15px 0;
            border-left: 4px solid var(--accent); text-align: left;
        }
        .info-label { font-size: 0.8rem; color: var(--accent); font-weight: 700; display: block; margin-bottom: 4px; }
        .info-text { font-size: 1rem; color: #37474f; line-height: 1.4; }

        .modal-msg { font-size: 1rem; color: var(--text-muted); margin-bottom: 20px; white-space: pre-wrap; }
        
        /* --- SMART BUTTON LAYOUT --- */
        .smart-actions {
            margin-top: 20px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        /* Top Row: Download + Next */
        .action-row {
            display: flex;
            gap: 12px;
            width: 100%;
        }

        .btn-smart {
            border: none; border-radius: 16px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.1s;
        }
        .btn-smart:active { transform: scale(0.95); }

        .btn-icon-card {
            flex: 1; /* Equal width */
            padding: 15px;
            font-size: 1.2rem;
        }
        
        .btn-download-smart { background: #ffca28; color: #37474f; } /* Amber */
        .btn-next-smart { background: var(--primary); color: white; } /* Green */
        
        /* Bottom Row: Facebook */
        .btn-fb-smart {
            width: 100%;
            padding: 14px;
            background: var(--fb-blue);
            color: white;
            font-weight: 600;
            font-family: var(--font-main);
            font-size: 1rem;
            border-radius: 50px;
            display: flex; justify-content: center; gap: 8px;
        }

        /* Simple Next Button (for mid-game) */
        .btn-simple-next {
            width: 100%; padding: 12px; border-radius: 50px; border: none;
            background: var(--primary); color: white; font-weight: 600; cursor: pointer;
            font-family: var(--font-main); font-size: 1rem; margin-top: 15px;
            display: flex; justify-content: center; align-items: center; gap: 8px;
        }

    </style>
</head>
<body>

<div id="app-container">
    
    <svg style="display: none;">
        <symbol id="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></symbol>
        <symbol id="icon-time" viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-8 8 3.58 8 8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></symbol>
        <symbol id="icon-star" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></symbol>
        <symbol id="icon-heart" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></symbol>
        <symbol id="icon-check" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></symbol>
        <symbol id="icon-download" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></symbol>
        <symbol id="icon-fb" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.791-4.647 4.535-4.647 1.314 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></symbol>
        <symbol id="icon-next" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></symbol>
        <symbol id="icon-door" viewBox="0 0 24 24"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></symbol>
    </svg>

    <div id="home-screen" class="fade-in">
        <div class="logo-icon">üåø</div>
        <div class="edition-badge" style="color:var(--primary); font-weight:600; margin-bottom:10px;">Botanica</div>
        <h1>‡¶¨‡ßã‡¶ü‡¶æ‡¶®‡¶ø‡¶ï‡¶æ</h1>
        <div class="tagline">Play with Nature, Grow with Knowledge</div>
        
        <button class="btn-primary" onclick="game.showNameInput()">
            <svg class="icon"><use href="#icon-play"></use></svg> ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
        </button>

        <div class="dev-credit">
            Developed by <a href="https://rjtanjid24.github.io/me/" target="_blank">Tanjid Shuvro</a>
        </div>
    </div>

    <div id="name-input-screen" class="hidden fade-in">
        <h2 style="margin-bottom: 20px; color: var(--primary);">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</h2>
        <input type="text" id="user-name-input" class="input-box" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." maxlength="15">
        <button class="btn-primary" onclick="game.submitName()">‡¶ñ‡ßá‡¶≤‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ</button>
    </div>

    <div id="game-screen" class="hidden">
        <div class="game-header">
            <div class="header-left">
                <button class="btn-icon-only" onclick="game.exitToHome()" title="Exit Game">
                    <svg class="icon"><use href="#icon-door"></use></svg>
                </button>
                <div class="stat-pill">
                    <svg class="icon" style="color: var(--accent)"><use href="#icon-star"></use></svg>
                    <span id="ui-score" class="font-en">0</span>
                </div>
            </div>
            
            <div class="header-right">
                <div class="stat-pill timer-pill">
                    <svg class="icon"><use href="#icon-time"></use></svg>
                    <span id="ui-timer" class="font-en">05:00</span>
                </div>
                <div class="stat-pill">Lvl <span id="ui-level" class="font-en" style="margin-left: 4px">1</span></div>
            </div>
        </div>

        <div class="play-area">
            <div class="lives-wrapper" id="ui-lives"></div>

            <div class="hint-card">
                <span class="hint-label">‡¶á‡¶ô‡ßç‡¶ó‡¶ø‡¶§</span>
                <div class="hint-text" id="ui-hint">...</div>
            </div>

            <div class="tiles-grid" id="tiles-area"></div>

            <div class="preview-container">
                <span id="ui-preview" class="preview-text placeholder">‡¶∂‡¶¨‡ßç‡¶¶ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®...</span>
            </div>
        </div>

        <div class="controls-area">
            <button class="btn-action btn-skip" onclick="game.skipWord()">
                <svg class="icon"><use href="#icon-next"></use></svg> ‡¶è‡ßú‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶®
            </button>
            <button class="btn-action btn-submit" onclick="game.submitWord()">
                <svg class="icon"><use href="#icon-check"></use></svg> ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
            </button>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-card">
            <span class="modal-icon" id="modal-icon">üéâ</span>
            <h2 class="modal-title" id="modal-title">‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ</h2>
            
            <div id="modal-info-area" class="modal-info-box hidden">
                <span class="info-label">‡¶ú‡ßç‡¶û‡¶æ‡¶®‡¶ï‡¶£‡¶æ:</span>
                <span id="modal-info-text" class="info-text">...</span>
            </div>

            <p class="modal-msg" id="modal-msg">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú</p>
            
            <div id="smart-action-area" class="smart-actions hidden">
                <div class="action-row">
                    <button class="btn-smart btn-icon-card btn-download-smart" onclick="game.downloadCert()">
                        <svg class="icon-xl"><use href="#icon-download"></use></svg>
                    </button>
                    <button class="btn-smart btn-icon-card btn-next-smart" onclick="game.closeModal()">
                        <svg class="icon-xl"><use href="#icon-next"></use></svg>
                    </button>
                </div>
                <button class="btn-smart btn-fb-smart" onclick="game.openFacebook()">
                    <svg class="icon"><use href="#icon-fb"></use></svg> Connect with Facebook
                </button>
            </div>

            <button id="simple-next-btn" class="btn-simple-next hidden" onclick="game.closeModal()">
                <svg class="icon"><use href="#icon-next"></use></svg> ‡¶™‡¶∞‡ßá‡¶∞ ‡¶∂‡¶¨‡ßç‡¶¶
            </button>

        </div>
    </div>

    <canvas id="cert-canvas" width="1080" height="1080" style="display: none;"></canvas>

</div>

<script>
    /**
     * BOTANICA v2.1
     * Updates: Google Sheet Sync, Smart Icon Layout, Mobile Friendly
     */

    const socialLink = "https://facebook.com/t1nj94";
    // ADDED YOUR GOOGLE SCRIPT URL
    const googleScriptURL = "https://script.google.com/macros/s/AKfycby5gIlmrrVBB4o0WgzbgWljRkIh0ioPE7_0xfqap_uwc48ijNh9e1--TQzFwsL7pc99sw/exec"; 

    const wordDatabase = {
        1: [
            { word: "‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶", hint: "‡¶Ø‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶£ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶®‡ßú‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶®‡¶æ", info: "‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶ ‡¶∏‡¶æ‡¶≤‡ßã‡¶ï‡¶∏‡¶Ç‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶æ‡ßü ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø ‡¶®‡¶ø‡¶ú‡ßá‡¶á ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§" },
            { word: "‡¶Ö‡¶ï‡ßç‡¶∏‡¶ø‡¶ú‡ßá‡¶®", hint: "‡¶ó‡¶æ‡¶õ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ø‡¶æ ‡¶¶‡ßá‡ßü", info: "‡¶è‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶∂‡ßç‡¶¨‡¶æ‡¶∏-‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶π‡¶æ‡¶∞‡ßç‡¶Ø‡•§" },
            { word: "‡¶™‡¶∞‡¶æ‡¶ó", hint: "‡¶´‡ßÅ‡¶≤‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ú‡¶®‡¶® ‡¶ï‡¶£‡¶æ", info: "‡¶™‡¶∞‡¶æ‡¶ó‡¶∞‡ßá‡¶£‡ßÅ ‡¶ó‡¶∞‡ßç‡¶≠‡¶Æ‡ßÅ‡¶£‡ßç‡¶°‡ßá ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡¶æ‡¶®‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá‡¶á ‡¶´‡ßÅ‡¶≤‡ßá‡¶∞ ‡¶®‡¶ø‡¶∑‡ßá‡¶ï ‡¶π‡ßü‡•§" },
            { word: "‡¶Æ‡ßÅ‡¶ï‡ßÅ‡¶≤", hint: "‡¶´‡ßÅ‡¶≤ ‡¶´‡ßã‡¶ü‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ", info: "‡¶Ü‡¶Æ ‡¶¨‡¶æ ‡¶ï‡¶æ‡¶Å‡¶†‡¶æ‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶´‡¶≤‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶ó‡¶æ‡¶õ‡ßá ‡¶Æ‡ßÅ‡¶ï‡ßÅ‡¶≤ ‡¶Ü‡¶∏‡ßá‡•§" },
            { word: "‡¶∂‡ßá‡¶ï‡ßú", hint: "‡¶ó‡¶æ‡¶õ‡¶ï‡ßá ‡¶Æ‡¶æ‡¶ü‡¶ø‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ü‡¶ü‡¶ï‡ßá ‡¶∞‡¶æ‡¶ñ‡ßá", info: "‡¶∂‡ßá‡¶ï‡ßú ‡¶Æ‡¶æ‡¶ü‡¶ø ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶æ‡¶®‡¶ø ‡¶ì ‡¶ñ‡¶®‡¶ø‡¶ú ‡¶≤‡¶¨‡¶£ ‡¶∂‡ßã‡¶∑‡¶£ ‡¶ï‡¶∞‡ßá‡•§" },
            { word: "‡¶ï‡ßç‡¶≤‡ßã‡¶∞‡ßã‡¶´‡¶ø‡¶≤", hint: "‡¶™‡¶æ‡¶§‡¶æ‡¶∞ ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶¨‡¶∞‡ßç‡¶£‡¶ï‡¶£‡¶ø‡¶ï‡¶æ", info: "‡¶è‡¶á ‡¶∞‡¶û‡ßç‡¶ú‡¶ï ‡¶™‡¶¶‡¶æ‡¶∞‡ßç‡¶• ‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶Ü‡¶≤‡ßã ‡¶∂‡ßã‡¶∑‡¶£ ‡¶ï‡¶∞‡ßá ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡•§" },
            { word: "‡¶∂‡¶ø‡¶Æ‡ßÅ‡¶≤", hint: "‡¶§‡ßÅ‡¶≤‡¶æ ‡¶¶‡ßá‡ßü ‡¶è‡¶Æ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ó‡¶æ‡¶õ", info: "‡¶∂‡¶ø‡¶Æ‡ßÅ‡¶≤ ‡¶§‡ßÅ‡¶≤‡¶æ ‡¶¨‡¶æ‡¶≤‡¶ø‡¶∂ ‡¶¨‡¶æ ‡¶§‡ßã‡¶∂‡¶ï ‡¶§‡ßà‡¶∞‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡ßü‡•§" },
            { word: "‡¶™‡¶≤‡¶æ‡¶∂", hint: "‡¶¨‡¶∏‡¶®‡ßç‡¶§‡ßá‡¶∞ ‡¶≤‡¶æ‡¶≤ ‡¶´‡ßÅ‡¶≤", info: "‡¶™‡¶≤‡¶æ‡¶∂ ‡¶´‡ßÅ‡¶≤‡¶ï‡ßá '‡¶Ö‡¶∞‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶Ö‡¶ó‡ßç‡¶®‡¶ø' ‡¶¨‡¶≤‡¶æ ‡¶π‡ßü‡•§" },
            { word: "‡¶Ü‡¶ó‡¶æ‡¶õ‡¶æ", hint: "‡¶´‡¶∏‡¶≤‡ßá‡¶∞ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßá ‡¶Ö‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶", info: "‡¶Ü‡¶ó‡¶æ‡¶õ‡¶æ ‡¶Æ‡ßÇ‡¶≤ ‡¶´‡¶∏‡¶≤‡ßá‡¶∞ ‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡ßá‡ßú‡ßá ‡¶®‡ßá‡ßü‡•§" },
            { word: "‡¶Ö‡¶∞‡¶£‡ßç‡¶Ø", hint: "‡¶¨‡¶® ‡¶¨‡¶æ ‡¶ú‡¶ô‡ßç‡¶ó‡¶≤", info: "‡¶™‡ßÉ‡¶•‡¶ø‡¶¨‡ßÄ‡¶∞ ‡¶´‡ßÅ‡¶∏‡¶´‡ßÅ‡¶∏ ‡¶π‡¶≤‡ßã ‡¶Ö‡¶∞‡¶£‡ßç‡¶Ø, ‡¶Ø‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂‡ßá‡¶∞ ‡¶≠‡¶æ‡¶∞‡¶∏‡¶æ‡¶Æ‡ßç‡¶Ø ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßá‡•§" }
        ],
        2: [
            { word: "‡¶ú‡¶æ‡¶á‡¶≤‡ßá‡¶Æ", hint: "‡¶™‡¶æ‡¶®‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶π‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶ü‡¶ø‡¶∏‡ßç‡¶Ø‡ßÅ", info: "‡¶ú‡¶æ‡¶á‡¶≤‡ßá‡¶Æ ‡¶ü‡¶ø‡¶∏‡ßç‡¶Ø‡ßÅ ‡¶∂‡¶ø‡¶ï‡ßú ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶æ‡¶®‡¶ø ‡¶™‡¶æ‡¶§‡¶æ‡ßü ‡¶™‡ßå‡¶Å‡¶õ‡ßá ‡¶¶‡ßá‡ßü‡•§" },
            { word: "‡¶´‡ßç‡¶≤‡ßã‡ßü‡ßá‡¶Æ", hint: "‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶π‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶ü‡¶ø‡¶∏‡ßç‡¶Ø‡ßÅ", info: "‡¶´‡ßç‡¶≤‡ßã‡ßü‡ßá‡¶Æ ‡¶™‡¶æ‡¶§‡¶æ‡ßü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶∞‡¶æ ‡¶∂‡¶∞‡ßÄ‡¶∞‡ßá ‡¶õ‡ßú‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡ßü‡•§" },
            { word: "‡¶∏‡ßç‡¶ü‡ßã‡¶Æ‡¶æ‡¶ü‡¶æ", hint: "‡¶™‡¶æ‡¶§‡¶æ‡¶∞ ‡¶õ‡¶ø‡¶¶‡ßç‡¶∞‡¶™‡¶•", info: "‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶ ‡¶ó‡ßç‡¶Ø‡¶æ‡¶∏‡ßÄ‡ßü ‡¶Ü‡¶¶‡¶æ‡¶®-‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßá‡•§" },
            { word: "‡¶õ‡¶§‡ßç‡¶∞‡¶æ‡¶ï", hint: "‡¶ï‡ßç‡¶≤‡ßã‡¶∞‡ßã‡¶´‡¶ø‡¶≤‡¶¨‡¶ø‡¶π‡ßÄ‡¶® ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶", info: "‡¶è‡¶∞‡¶æ ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶®‡¶æ‡•§" },
            { word: "‡¶≤‡¶æ‡¶á‡¶ï‡ßá‡¶®", hint: "‡¶∂‡ßà‡¶¨‡¶æ‡¶≤ ‡¶ì ‡¶õ‡¶§‡ßç‡¶∞‡¶æ‡¶ï‡ßá‡¶∞ ‡¶∏‡¶π‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®", info: "‡¶≤‡¶æ‡¶á‡¶ï‡ßá‡¶® ‡¶¨‡¶æ‡ßü‡ßÅ ‡¶¶‡ßÇ‡¶∑‡¶£‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ï ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡•§" },
            { word: "‡¶™‡¶∞‡¶æ‡¶ó‡¶æ‡ßü‡¶®", hint: "‡¶™‡¶∞‡¶æ‡¶ó‡¶∞‡ßá‡¶£‡ßÅ‡¶∞ ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡¶æ‡¶®‡ßç‡¶§‡¶∞", info: "‡¶Æ‡ßå‡¶Æ‡¶æ‡¶õ‡¶ø, ‡¶¨‡¶æ‡¶§‡¶æ‡¶∏ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶™‡¶∞‡¶æ‡¶ó‡¶æ‡ßü‡¶® ‡¶ò‡¶ü‡ßá‡•§" },
            { word: "‡¶ï‡¶ø‡¶â‡¶ü‡¶ø‡¶ï‡¶≤", hint: "‡¶™‡¶æ‡¶§‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶Æ‡¶ú‡¶æ‡¶§‡ßÄ‡ßü ‡¶Ü‡¶¨‡¶∞‡¶£", info: "‡¶è‡¶ü‡¶ø ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶™‡¶æ‡¶®‡¶ø ‡¶¨‡ßá‡¶∞ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ ‡¶∞‡ßã‡¶ß ‡¶ï‡¶∞‡ßá‡•§" },
            { word: "‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞", hint: "Ecosystem", info: "‡¶ú‡ßÄ‡¶¨ ‡¶ì ‡¶ú‡ßú ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶®‡ßá‡¶∞ ‡¶™‡¶æ‡¶∞‡¶∏‡ßç‡¶™‡¶∞‡¶ø‡¶ï ‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶æ‡¶á ‡¶π‡¶≤‡ßã ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞‡•§" },
            { word: "‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡¶ø‡ßü‡¶æ‡¶Æ", hint: "‡¶ó‡ßå‡¶£ ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø‡¶∞ ‡¶ü‡¶ø‡¶∏‡ßç‡¶Ø‡ßÅ", info: "‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶¨‡¶ø‡ßü‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá‡¶á ‡¶ó‡¶æ‡¶õ ‡¶Æ‡ßã‡¶ü‡¶æ ‡¶π‡ßü‡•§" },
            { word: "‡¶∏‡ßç‡¶™‡ßã‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶ü", hint: "‡¶∞‡ßá‡¶®‡ßÅ‡¶ß‡¶∞ ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶", info: "‡¶´‡¶æ‡¶∞‡ßç‡¶® ‡¶ú‡¶æ‡¶§‡ßÄ‡ßü ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶‡ßá‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡¶ö‡¶ï‡ßç‡¶∞‡ßá ‡¶∏‡ßç‡¶™‡ßã‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶ü ‡¶¶‡¶∂‡¶æ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶®‡•§" }
        ],
        3: [
            { word: "‡¶∏‡¶æ‡¶≤‡ßã‡¶ï‡¶∏‡¶Ç‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£", hint: "‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶æ", info: "‡¶∏‡ßÇ‡¶∞‡ßç‡¶Ø‡ßá‡¶∞ ‡¶Ü‡¶≤‡ßã ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶ ‡¶∂‡¶∞‡ßç‡¶ï‡¶∞‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡•§" },
            { word: "‡¶Æ‡¶æ‡¶á‡¶ü‡ßã‡¶ï‡¶®‡ßç‡¶°‡ßç‡¶∞‡¶ø‡ßü‡¶æ", hint: "‡¶ï‡ßã‡¶∑‡ßá‡¶∞ ‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶ò‡¶∞", info: "‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∂‡¶ï‡ßç‡¶§‡¶ø (ATP) ‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶ø‡¶§ ‡¶π‡ßü‡•§" },
            { word: "‡¶∏‡¶æ‡¶á‡¶ü‡ßã‡¶™‡ßç‡¶≤‡¶æ‡¶ú‡¶Æ", hint: "‡¶ï‡ßã‡¶∑‡ßá‡¶∞ ‡¶ú‡ßá‡¶≤‡¶ø‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶Ö‡¶Ç‡¶∂", info: "‡¶Ö‡¶ô‡ßç‡¶ó‡¶æ‡¶£‡ßÅ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶≠‡¶æ‡¶∏‡¶Æ‡¶æ‡¶® ‡¶•‡¶æ‡¶ï‡ßá‡•§" },
            { word: "‡¶ï‡ßç‡¶∞‡ßã‡¶Æ‡ßã‡¶ú‡ßã‡¶Æ", hint: "‡¶¨‡¶Ç‡¶∂‡¶ó‡¶§‡¶ø‡¶∞ ‡¶¨‡¶æ‡¶π‡¶ï", info: "DNA ‡¶ú‡ßÄ‡¶¨‡ßá‡¶∞ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø ‡¶¨‡¶π‡¶® ‡¶ï‡¶∞‡ßá‡•§" },
            { word: "‡¶ü‡¶ø‡¶∏‡ßç‡¶Ø‡ßÅ‡¶ï‡¶æ‡¶≤‡¶ö‡¶æ‡¶∞", hint: "‡¶ï‡ßÉ‡¶§‡ßç‡¶∞‡¶ø‡¶Æ ‡¶ö‡¶æ‡¶∞‡¶æ ‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶®", info: "‡¶Ö‡¶≤‡ßç‡¶™ ‡¶∏‡¶Æ‡ßü‡ßá ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶∞‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§" },
            { word: "‡¶è‡¶®‡ßç‡¶°‡ßã‡¶∏‡ßç‡¶™‡¶æ‡¶∞‡ßç‡¶Æ", hint: "‡¶∂‡¶∏‡ßç‡¶Ø ‡¶ü‡¶ø‡¶∏‡ßç‡¶Ø‡ßÅ", info: "‡¶è‡¶ü‡¶ø ‡¶¨‡ßÄ‡¶ú‡ßá‡¶∞ ‡¶≠‡ßç‡¶∞‡ßÅ‡¶£‡¶ï‡ßá ‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø ‡¶ú‡ßã‡¶ó‡¶æ‡ßü (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶®‡¶æ‡¶∞‡¶ø‡¶ï‡ßá‡¶≤)‡•§" },
            { word: "‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶¨‡ßá‡¶¶‡¶®", hint: "‡¶™‡¶æ‡¶®‡¶ø ‡¶¨‡ßá‡¶∞ ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶æ", info: "‡¶è‡¶∞ ‡¶´‡¶≤‡ßá ‡¶ó‡¶æ‡¶õ‡ßá‡¶∞ ‡¶¶‡ßá‡¶π ‡¶†‡¶æ‡¶®‡ßç‡¶°‡¶æ ‡¶•‡¶æ‡¶ï‡ßá‡•§" },
            { word: "‡¶Æ‡¶ø‡ßü‡ßã‡¶∏‡¶ø‡¶∏", hint: "‡¶ú‡¶®‡¶® ‡¶ï‡ßã‡¶∑ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ú‡¶®", info: "‡¶ï‡ßç‡¶∞‡ßã‡¶Æ‡ßã‡¶ú‡ßã‡¶Æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶Ö‡¶∞‡ßç‡¶ß‡ßá‡¶ï ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü‡•§" },
            { word: "‡¶≠‡¶æ‡¶∞‡ßç‡¶®‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®", hint: "‡¶∂‡ßà‡¶§‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®", info: "‡¶´‡ßÅ‡¶≤ ‡¶´‡ßã‡¶ü‡¶æ‡¶®‡ßã ‡¶§‡ßç‡¶¨‡¶∞‡¶æ‡¶®‡ßç‡¶¨‡¶ø‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶†‡¶æ‡¶®‡ßç‡¶°‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡•§" },
            { word: "‡¶á‡¶ï‡ßã‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ", hint: "‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂‡ßá‡¶∞ ‡¶≠‡¶æ‡¶∞‡¶∏‡¶æ‡¶Æ‡ßç‡¶Ø", info: "‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶ï ‡¶ì ‡¶ñ‡¶æ‡¶¶‡¶ï‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡•§" }
        ]
    };

    const motivationalQuotes = [
        "‡¶∂‡ßá‡¶ï‡ßú ‡¶Ø‡¶§ ‡¶ó‡¶≠‡ßÄ‡¶∞, ‡¶ù‡ßú ‡¶§‡¶æ‡¶ï‡ßá ‡¶§‡¶§ ‡¶ï‡¶Æ ‡¶ü‡¶≤‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§",
        "‡¶™‡ßç‡¶∞‡¶ï‡ßÉ‡¶§‡¶ø‡¶∞ ‡¶ï‡¶æ‡¶õ ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßá‡¶ñ‡ßã, ‡¶∏‡ßá ‡¶ï‡¶ñ‡¶®‡ßã ‡¶§‡¶æ‡ßú‡¶æ‡¶π‡ßÅ‡ßú‡ßã ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§",
        "‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßÄ‡¶ú ‡¶Ø‡ßá‡¶Æ‡¶® ‡¶Ö‡¶®‡ßç‡¶ß‡¶ï‡¶æ‡¶∞ ‡¶≠‡ßá‡¶¶ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶≤‡ßã‡¶§‡ßá ‡¶Ü‡¶∏‡ßá, ‡¶§‡ßÅ‡¶Æ‡¶ø‡¶ì ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡•§",
        "‡¶ú‡ßç‡¶û‡¶æ‡¶®‡ßá‡¶∞ ‡¶Ü‡¶≤‡ßã‡ßü ‡¶®‡¶ø‡¶ú‡ßá‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡ßã‡¶∞‡ßã‡¶´‡¶ø‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶∏‡¶ú‡ßÄ‡¶¨ ‡¶∞‡¶æ‡¶ñ‡ßã‡•§",
        "‡¶¨‡ßá‡ßú‡ßá ‡¶ì‡¶†‡ßã ‡¶Æ‡¶π‡ßÄ‡¶∞‡ßÇ‡¶π‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã, ‡¶Ø‡ßá‡¶® ‡¶∏‡¶¨‡¶æ‡¶á‡¶ï‡ßá ‡¶õ‡¶æ‡ßü‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã‡•§"
    ];

    class GameEngine {
        constructor() {
            this.levels = [
                { time: 300, label: "1", words: 5 }, 
                { time: 240, label: "2", words: 7 }, 
                { time: 180, label: "3", words: 10 } 
            ];

            this.state = {
                userName: "Player",
                currLvl: 0,
                score: 0,
                timer: 0,
                timerInt: null,
                wordObj: null,
                scramble: [],
                lives: 3,
                queue: [],
                selIdx: -1,
                gameComplete: false
            };

            this.els = {
                home: document.getElementById('home-screen'),
                nameInput: document.getElementById('name-input-screen'),
                inputField: document.getElementById('user-name-input'),
                game: document.getElementById('game-screen'),
                uiName: document.getElementById('ui-user-name'),
                score: document.getElementById('ui-score'),
                timer: document.getElementById('ui-timer'),
                lvl: document.getElementById('ui-level'),
                lives: document.getElementById('ui-lives'),
                hint: document.getElementById('ui-hint'),
                preview: document.getElementById('ui-preview'),
                tiles: document.getElementById('tiles-area'),
                modal: document.getElementById('modal-overlay'),
                mTitle: document.getElementById('modal-title'),
                mMsg: document.getElementById('modal-msg'),
                mInfoArea: document.getElementById('modal-info-area'), 
                mInfoText: document.getElementById('modal-info-text'), 
                mIcon: document.getElementById('modal-icon'),
                
                // Smart UI Areas
                smartActions: document.getElementById('smart-action-area'),
                simpleNextBtn: document.getElementById('simple-next-btn'),

                canvas: document.getElementById('cert-canvas')
            };
        }

        showNameInput() {
            this.els.home.classList.add('hidden');
            this.els.nameInput.classList.remove('hidden');
        }

        submitName() {
            const name = this.els.inputField.value.trim();
            if (name) {
                this.state.userName = name;
                this.startGame();
            } else {
                this.els.inputField.style.borderColor = "red";
                setTimeout(() => this.els.inputField.style.borderColor = "#a5d6a7", 1000);
            }
        }

        startGame() {
            this.els.nameInput.classList.add('hidden');
            this.els.game.classList.remove('hidden');
            this.resetGame();
            this.startLevel(0);
        }

        exitToHome() {
            clearInterval(this.state.timerInt);
            this.els.game.classList.add('hidden');
            this.els.home.classList.remove('hidden');
        }

        resetGame() {
            this.state.score = 0;
            this.state.gameComplete = false;
            this.updateStatUI();
        }

        startLevel(idx) {
            this.state.currLvl = idx;
            const config = this.levels[idx];
            this.state.timer = config.time;
            
            const levelKey = parseInt(config.label);
            const pool = [...wordDatabase[levelKey]];
            
            for (let i = pool.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [pool[i], pool[j]] = [pool[j], pool[i]];
            }

            this.state.queue = pool.slice(0, config.words);
            
            this.updateStatUI();
            this.startTimer();
            this.nextWord();
        }

        nextWord() {
            if (this.state.queue.length === 0) {
                this.levelComplete();
                return;
            }
            this.loadWord(this.state.queue.pop());
        }

        loadWord(obj) {
            this.state.wordObj = obj;
            this.state.lives = 3;
            this.state.selIdx = -1;
            
            let chars = [];
            if (window.Intl && Intl.Segmenter) {
                const segmenter = new Intl.Segmenter("bn", { granularity: "grapheme" });
                chars = [...segmenter.segment(obj.word)].map(s => s.segment);
            } else {
                chars = Array.from(obj.word); 
            }

            for (let i = chars.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [chars[i], chars[j]] = [chars[j], chars[i]];
            }
            this.state.scramble = chars;

            this.els.hint.textContent = obj.hint;
            this.render();
        }

        render() {
            this.els.tiles.innerHTML = '';
            this.state.scramble.forEach((char, i) => {
                const tile = document.createElement('div');
                tile.className = `tile ${i === this.state.selIdx ? 'selected' : ''}`;
                tile.textContent = char;
                tile.onclick = () => this.tileClick(i);
                this.els.tiles.appendChild(tile);
            });

            this.els.lives.innerHTML = '';
            for(let i=0; i<3; i++) {
                const isActive = i < this.state.lives ? 'active' : '';
                this.els.lives.innerHTML += `<svg class="icon icon-heart heart-icon ${isActive}"><use href="#icon-heart"></use></svg>`;
            }

            const str = this.state.scramble.join('');
            if(!str) {
                this.els.preview.textContent = "‡¶∂‡¶¨‡ßç‡¶¶ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®...";
                this.els.preview.className = "preview-text placeholder";
            } else {
                this.els.preview.textContent = str;
                this.els.preview.className = "preview-text";
            }
        }

        tileClick(idx) {
            if (this.state.selIdx === -1) {
                this.state.selIdx = idx;
            } else if (this.state.selIdx === idx) {
                this.state.selIdx = -1;
            } else {
                const arr = this.state.scramble;
                [arr[this.state.selIdx], arr[idx]] = [arr[idx], arr[this.state.selIdx]];
                this.state.selIdx = -1;
            }
            this.render();
        }

        submitWord() {
            const curr = this.state.scramble.join('');
            const target = this.state.wordObj.word;
            const info = this.state.wordObj.info;

            if (curr === target) {
                this.state.score += 10;
                this.updateStatUI();
                this.showModal('üåø', '‡¶Ö‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£!', `‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: ${target}`, info, false, () => this.nextWord());
            } else {
                this.state.lives--;
                this.els.preview.classList.add('shake-anim');
                setTimeout(() => this.els.preview.classList.remove('shake-anim'), 400);
                this.render();

                if (this.state.lives <= 0) {
                    this.showModal('ü•Ä', '‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞!', `‡¶∏‡¶†‡¶ø‡¶ï ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø ‡¶õ‡¶ø‡¶≤: ${target}`, info, false, () => this.nextWord());
                }
            }
        }

        skipWord() {
            const info = this.state.wordObj.info;
            this.showModal('‚è≠Ô∏è', '‡¶∏‡ßç‡¶ï‡¶ø‡¶™ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá', `‡¶∏‡¶†‡¶ø‡¶ï ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø ‡¶õ‡¶ø‡¶≤: ${this.state.wordObj.word}`, info, false, () => this.nextWord());
        }

        startTimer() {
            if (this.state.timerInt) clearInterval(this.state.timerInt);
            this.state.timerInt = setInterval(() => {
                this.state.timer--;
                this.updateStatUI();
                if (this.state.timer <= 0) this.gameOver();
            }, 1000);
        }

        updateStatUI() {
            this.els.lvl.textContent = this.levels[this.state.currLvl].label;
            this.els.score.textContent = this.state.score;
            
            const m = Math.floor(this.state.timer / 60).toString().padStart(2,'0');
            const s = (this.state.timer % 60).toString().padStart(2,'0');
            this.els.timer.textContent = `${m}:${s}`;
        }

        levelComplete() {
            clearInterval(this.state.timerInt);
            this.sendDataToSheet();

            if (this.state.currLvl < this.levels.length - 1) {
                const nextLvl = this.state.currLvl + 1;
                const msg = `‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£ ${this.state.userName}!\n‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ${this.levels[this.state.currLvl].label} ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§`;
                
                this.showModal('üå±', '‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!', msg, null, true, () => {
                    this.startLevel(nextLvl);
                });
            } else {
                this.gameFinish();
            }
        }

        gameFinish() {
            this.state.gameComplete = true;
            this.sendDataToSheet();

            const quote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
            const msg = `‡¶™‡ßç‡¶∞‡¶ø‡ßü ${this.state.userName}, ‡¶ö‡¶Æ‡ßé‡¶ï‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶≤‡ßá‡¶õ‡ßá‡¶®!\n\n"${quote}"\n\n‡¶∏‡ßç‡¶ï‡ßã‡¶∞: ${this.state.score}`;
            
            this.showModal('üå≥', '‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®!', msg, null, true, () => {
                location.reload();
            });
        }

        gameOver() {
            clearInterval(this.state.timerInt);
            this.sendDataToSheet();
            const msg = `‡¶∏‡¶Æ‡ßü ‡¶∂‡ßá‡¶∑! ‡¶≠‡¶æ‡¶≤‡ßã ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶® ${this.state.userName}‡•§`;
            this.showModal('‚è∞', '‡¶ó‡ßá‡¶Æ ‡¶ì‡¶≠‡¶æ‡¶∞!', msg, null, true, () => {
                location.reload();
            });
        }

        sendDataToSheet() {
            const data = {
                name: this.state.userName,
                score: this.state.score,
                level: this.levels[this.state.currLvl].label
            };

            fetch(googleScriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            }).catch(err => console.log("Sync error"));
        }

        openFacebook() { window.open(socialLink, '_blank'); }

        showModal(icon, title, msg, infoText, isEndState, cb) {
            this.els.mIcon.textContent = icon;
            this.els.mTitle.textContent = title;
            this.els.mMsg.textContent = msg; 
            
            if(infoText) {
                this.els.mInfoArea.classList.remove('hidden');
                this.els.mInfoText.textContent = infoText;
            } else {
                this.els.mInfoArea.classList.add('hidden');
            }

            // Button Toggle Logic
            if(isEndState) {
                this.els.smartActions.classList.remove('hidden');
                this.els.simpleNextBtn.classList.add('hidden');
            } else {
                this.els.smartActions.classList.add('hidden');
                this.els.simpleNextBtn.classList.remove('hidden');
            }

            this.els.modal.classList.add('active');
            
            // Re-bind simple next button specifically
            this.els.simpleNextBtn.onclick = () => {
                this.els.modal.classList.remove('active');
                if(cb) cb();
            };
        }

        closeModal() { this.els.modal.classList.remove('active'); }

        downloadCert() {
            const canvas = this.els.canvas;
            const ctx = canvas.getContext('2d');
            const w = 1080, h = 1080;
            const grd = ctx.createLinearGradient(0, 0, 0, h);
            grd.addColorStop(0, "#e8f5e9"); grd.addColorStop(1, "#c8e6c9");
            ctx.fillStyle = grd; ctx.fillRect(0, 0, w, h);

            ctx.strokeStyle = "#2e7d32"; ctx.lineWidth = 30; ctx.strokeRect(40, 40, w - 80, h - 80);
            ctx.strokeStyle = "rgba(46, 125, 50, 0.3)"; ctx.lineWidth = 5; ctx.strokeRect(60, 60, w - 120, h - 120);

            ctx.fillStyle = "#2e7d32"; ctx.beginPath(); ctx.roundRect(w/2 - 80, 150, 160, 160, 40); ctx.fill();
            ctx.fillStyle = "#FFFFFF"; ctx.font = "bold 100px 'Hind Siliguri'"; ctx.textAlign = "center"; ctx.textBaseline = "middle"; ctx.fillText("üåø", w/2, 230);

            ctx.fillStyle = "#1b5e20"; ctx.font = "bold 80px 'Hind Siliguri'"; ctx.textBaseline = "alphabetic"; ctx.fillText("‡¶¨‡ßã‡¶ü‡¶æ‡¶®‡¶ø‡¶ï‡¶æ", w/2, 420);
            ctx.fillStyle = "#2e7d32"; ctx.font = "500 40px 'Poppins'"; ctx.fillText("Botanica Edition", w/2, 480);

            ctx.fillStyle = "#546e7a"; ctx.font = "500 45px 'Hind Siliguri'";
            const achievementText = this.state.gameComplete ? "‡¶ó‡ßá‡¶Æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®" : `‡¶≤‡ßá‡¶≠‡ßá‡¶≤ ${this.levels[this.state.currLvl].label} ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®`;
            ctx.fillText(achievementText, w/2, 560);

            ctx.fillStyle = "#ff6f00"; ctx.font = "bold 90px 'Hind Siliguri'"; ctx.fillText(this.state.userName, w/2, 700);

            ctx.fillStyle = "#1c313a"; ctx.font = "600 50px 'Hind Siliguri'"; ctx.fillText("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞", w/2, 800);
            ctx.fillStyle = "#2e7d32"; ctx.font = "bold 100px 'Poppins'"; ctx.fillText(this.state.score, w/2, 910);

            ctx.fillStyle = "#558b2f"; ctx.font = "italic 30px 'Poppins'"; ctx.fillText("Developed by Tanjid Shuvro", w/2, 1000);

            const link = document.createElement('a');
            link.download = `Botanica_${this.state.userName}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
    }
    const game = new GameEngine();
</script>
</body>
</html>